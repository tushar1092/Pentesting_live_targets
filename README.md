# Pentesting_live_targets
Week 9 tasks for pentesting live targets
# Project 8 - Pentesting Live Targets

Time spent: **X** hours spent in total

> Objective: Identify vulnerabilities in three different versions of the Globitek website: blue, green, and red.

The six possible exploits are:
* Username Enumeration
* Insecure Direct Object Reference (IDOR)
* SQL Injection (SQLi)
* Cross-Site Scripting (XSS)
* Cross-Site Request Forgery (CSRF)
* Session Hijacking/Fixation

Each version of the site has been given two of the six vulnerabilities. (In other words, all six of the exploits should be assignable to one of the sites.)

## Blue

Vulnerability #1: Session Hijacking
Two of the three websites expire their active sessions and require users to re-login every 30 minutes. That is probably too aggressive for the real world, but it is better than the third site which allows sessions to be a year old, and never regenerates the session ID, even when the user agent string changes. This makes it vulnerable to both session hijacking and session fixation attacks.

There are many ways an attacker could get or set the session ID in the real world (XSS, sniffing WiFi packets, etc.). For this exercise, a PHP script has been provided to help you, "public/hacktools/change_session_id.php". You can load this script to find out the current session ID or to set it to a new one.

Use two different web browsers (e.g., Firefox and Chrome). Let one browser be the attacker and the other the target. Choose if you want to attempt a session hijacking or session fixation. For hijacking, log the target in first, then give the logged-in session ID to the attacker. For fixation, get a session ID for the attacker, give it to the target, then the target will log in. In both cases, the attacker should now have access to the staff area.

Determine which color has the vulnerability.

By using the PHP script we can get the session id from one browser and replace the session id for other browser with it and will be able to hijack the session. 
<img src="sh.gif" width="800">

Vulnerability #2: SQL Injection
Most of the data input received by these websites is being sanitized properly. However, one of the three sites has one place where the input is not being sanitized before being used in an SQL query. Determine which color has the vulnerability.
By placing the query "%27%20OR%20SLEEP(5)=0--%27" in the URL we can delay the response. 
<img src="sqlinjc.gif" width="800">

## Green

Vulnerability #1: User Enumeration
 Username Enumeration: A careless developer mistake has created a username enumeration vulnerability. Determine which color has the vulnerability. You can use the existing username "jmonroe99" as a test. Next, figure out what mistake the developer made.
 In this there were two different classes used which were "failed" if the user is not in the database and "failure" if the user is in the database. 
<img src="user_enum.gif" width="800">

Vulnerability #2: Cross Site Scripting
All three sites do a good job of protecting against a reflected XSS attack. However, one of the sites has a mistake which leaves the site vulnerable to a stored XSS attack. A reflected XSS attack would be easy to reveal, while a stored XSS does not provide instant feedback. You will need to log into the admin area and look through the CMS in order to "spring the trap" and find out if your attack succeeded. Determine which color has the vulnerability. Remember, others will be attacking these sites alongside you. Use your name in the XSS so that your results won't be confused with anyone else's (example: <script>alert('Mallory found the XSS!');</script>).
The user can insert the given script with his/her name in the feedback form and submit it like "<script>alert('Tushar found the XSS!');</script>)"
<img src="sqlinjc.gif" width="800">


## Red

Vulnerability #1: Indirect Object Reference
 One of the three sites is missing code which would prevent some sensitive information from being made public. Determine which color has the vulnerability. Then, figure out what the other two sites did correctly to prevent the information leak. In this the user is able to access accounts which the attacker is not allowed to view. We can change the id number and will be able to view them, as in gif below.
<img src="idor.gif" width="800">
Vulnerability #2: Cross-Site Request Forgery: One of the three sites does not have CSRF protections on the admin area. A clever attacker could design a form which would automatically submit form data to the staff area and take advantage of a logged in user's access permissions. Be the attacker and design a form which will make a change to the spelling of some database content. (For example, change the first user from "James" to "Jim", or change "Alabama" to "Alabamaaaa".) Then point the form action at each of the three sites to find out which color has the vulnerability. Do not neglect to be stealthy with your formâ€”your unsuspecting, logged-in admin should neither see the form nor the results of the form submission.
Was able to make the form but was not able to modify the data on website with it. It did submit didn't make changes to the webpage. 
<img src="" width="800">

## Bonus Objective 1
Build on Objective #3 (SQL Injection). Experiment to see what other kinds of information you can get the database to reveal.
1- Login in using the pperson id and password
2- Go to Find a Salesperson
3- Select any salesperson
4- In the URL after id place the query in it. 
5- In this when we place the query URL "' UNION SELECT 1, session_user( ), version( ), database( ), 5--'"
6- This gives us details of the databse such as version. 
<img src="bonusSQL.gif" width="800">
## Notes


Describe any challenges encountered while doing the work
